{"ast":null,"code":"import { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"/home/algo/repos/survey/components/header/header.jsx\";\nimport React, { useState, useEffect, useRef } from 'react';\nimport style from './header.module.scss';\nimport { Container, ClickAwayListener, makeStyles, Button } from '@material-ui/core';\nimport CartDropdown from './CartDropdown';\nimport LanguageDropdown from './LanguageDropdown';\nimport { BrandLogo, CloseIcon, ProfileIcon } from '../svg';\nimport { SearchOutlined } from '@material-ui/icons';\nimport { motion, useAnimation, AnimatePresence } from 'framer-motion';\nimport NavItem from './navItem';\nimport { useTranslation, Router, Link } from '../../i18n';\nimport ProfileDropdown from './ProfileDropdown';\nimport MobileHeader from './mobileHeader';\nimport PropTypes from 'prop-types';\nimport AppBar from '@material-ui/core/AppBar';\nimport useScrollTrigger from '@material-ui/core/useScrollTrigger';\nimport Slide from '@material-ui/core/Slide';\nimport QuickSearch from './QuickSearch';\nimport axios from 'axios';\n\nfunction HideOnScroll(props) {\n  const {\n    children,\n    window\n  } = props; // Note that you normally won't need to set the window ref as useScrollTrigger\n  // will default to window.\n  // This is only being set here because the demo is in an iframe.\n\n  const trigger = useScrollTrigger({\n    target: window ? window() : undefined\n  });\n  return /*#__PURE__*/_jsxDEV(Slide, {\n    appear: false,\n    direction: \"down\",\n    in: !trigger,\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 33,\n    columnNumber: 5\n  }, this);\n}\n\nHideOnScroll.propTypes = {\n  children: PropTypes.element.isRequired,\n  window: PropTypes.func\n};\nconst useStyles = makeStyles(() => ({\n  select: {\n    '& .MuiInput-root::before': {\n      display: 'none'\n    },\n    '& .MuiInput-underline:after': {\n      border: '0'\n    },\n    '& .MuiInput-underline:before': {\n      border: '0'\n    },\n    '& .Mui-focused': {\n      background: 'transparent'\n    }\n  }\n}));\n\nfunction Header({\n  categories,\n  hasLogged\n}) {\n  const {\n    t\n  } = useTranslation();\n  const {\n    0: isMobile,\n    1: setIsMobile\n  } = useState(false);\n  const classes = useStyles();\n  const searchRef = useRef(null);\n  const animationForm = useAnimation();\n  const {\n    0: loading,\n    1: setLoading\n  } = useState(false);\n  const {\n    0: isSearchVisible,\n    1: setIsSearchVisible\n  } = useState(false);\n  const {\n    0: term,\n    1: setTerm\n  } = useState('');\n  const {\n    0: products,\n    1: setProducts\n  } = useState([]);\n  const navData = [{\n    title: t('apple_p'),\n    subCategs: [{\n      title: 'Iphone',\n      link: 'category=apple_p&subcategory=Iphone'\n    }, {\n      title: 'Ipad',\n      link: 'category=apple_p&subcategory=Ipad'\n    }, {\n      title: 'Apple watch',\n      link: 'category=apple_p&subcategory=Apple_watch'\n    }, {\n      title: 'AirPod',\n      link: 'category=apple_p&subcategory=AirPod'\n    }, {\n      title: 'Macbook',\n      link: 'category=apple_p&subcategory=Macbook'\n    }, {\n      title: 'iMac',\n      link: 'category=apple_p&subcategory=iMac'\n    }]\n  }, {\n    title: t('samsung_p'),\n    subCategs: [{\n      title: t('galaxy_phones'),\n      link: 'category=samsung_p&subcategory=galaxy@phones'\n    }, {\n      title: t('watches'),\n      link: 'category=samsung_p&subcategory=watches'\n    }, {\n      title: t('tablets'),\n      link: 'category=samsung_p&subcategory=tablets'\n    }]\n  }, {\n    title: t('acoustics'),\n    subCategs: [{\n      title: t('speakers'),\n      link: 'category=acoustics&subcategory=speakers'\n    }, {\n      title: t('earphones'),\n      link: 'category=acoustics&subcategory=earphones'\n    }, {\n      title: t('microphones'),\n      link: 'category=acoustics&subcategory=microphones'\n    }]\n  }, {\n    title: t('accessories'),\n    subCategs: [{\n      title: t('covers'),\n      link: 'category=accessories&subcategory=covers'\n    }, {\n      title: t('chargers'),\n      link: 'category=accessories&subcategory=chargers'\n    }]\n  }];\n\n  const submitHandler = e => {\n    e.preventDefault();\n\n    if (term) {\n      setIsSearchVisible(false);\n      Router.push(`/search?search=${encodeURI(term)}`);\n    }\n  };\n\n  useEffect(() => {\n    if (isSearchVisible) {\n      animationForm.start('visible');\n    } else {\n      animationForm.start('stable');\n      setTerm('');\n    }\n  }, [isSearchVisible]);\n  useEffect(() => {\n    if (searchRef.current) {\n      if (isSearchVisible) {\n        searchRef.current.focus();\n      } else {\n        searchRef.current.blur();\n      }\n    }\n  }, [isSearchVisible]);\n  useEffect(() => {\n    if (term && term.length > 2) {\n      searchProduct();\n    } else if (term === '') {\n      setProducts([]);\n    }\n  }, [term]);\n\n  const searchProduct = async () => {\n    try {\n      setLoading(true);\n      const response = await axios.get(`http://46.101.122.150:1235/v1/product?lang=ru&search=${term}&active=true`);\n      setProducts(response.data.products);\n      console.log(response);\n    } catch (err) {\n      console.log(err);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleSearch = () => {\n    if (term) {\n      setIsSearchVisible(false);\n      Router.push(`/search?search=${term}`);\n    } else {\n      setIsSearchVisible(!isSearchVisible);\n    }\n  };\n\n  useEffect(() => {\n    if (window) {\n      setIsMobile(window.innerWidth > 876 ? false : true);\n      window.addEventListener('resize', () => setIsMobile(window.innerWidth > 876 ? false : true));\n    }\n\n    document.addEventListener('keydown', e => {\n      if (e.keyCode === 27) {\n        setIsSearchVisible(false);\n      }\n    }, false);\n    return () => {\n      window.removeEventListener('resize', () => {});\n      document.removeEventListener('keydown', e => console.log(e), false);\n    };\n  }, []);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(AppBar, {\n      elevation: 0,\n      children: /*#__PURE__*/_jsxDEV(\"header\", {\n        className: style.header,\n        children: /*#__PURE__*/_jsxDEV(Container, {\n          children: !isMobile ? /*#__PURE__*/_jsxDEV(\"div\", {\n            className: style.wrapper,\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: style.brandLogo,\n              children: /*#__PURE__*/_jsxDEV(Link, {\n                href: \"/\",\n                children: /*#__PURE__*/_jsxDEV(\"a\", {\n                  id: \"logo_header\",\n                  \"aria-label\": \"Logo\",\n                  children: /*#__PURE__*/_jsxDEV(BrandLogo, {}, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 216,\n                    columnNumber: 23\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 215,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 214,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 213,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: style.nav,\n              children: [/*#__PURE__*/_jsxDEV(\"ul\", {\n                className: style.list,\n                children: [categories === null || categories === void 0 ? void 0 : categories.map((item, index) => /*#__PURE__*/_jsxDEV(NavItem, {\n                  data: item,\n                  subCategs: item.children\n                }, index, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 223,\n                  columnNumber: 23\n                }, this)), /*#__PURE__*/_jsxDEV(\"li\", {\n                  className: style.listItem,\n                  children: /*#__PURE__*/_jsxDEV(ClickAwayListener, {\n                    onClickAway: () => setIsSearchVisible(false),\n                    children: /*#__PURE__*/_jsxDEV(motion.form, {\n                      autoComplete: \"off\",\n                      className: `${style.searchForm} ${isSearchVisible ? style.animate : ''}`,\n                      variants: {\n                        visible: {\n                          left: '0',\n                          right: 'auto',\n                          top: '50%',\n                          y: '-50%',\n                          width: '100%'\n                        },\n                        stable: {\n                          right: '50px',\n                          left: 'auto',\n                          // x: 0,\n                          flip: true,\n                          width: '0',\n                          top: 0,\n                          y: 0\n                        }\n                      },\n                      transition: {\n                        duration: 0.3,\n                        type: 'twin'\n                      },\n                      animate: animationForm,\n                      initial: 'stable',\n                      exit: 'stable',\n                      onSubmit: submitHandler,\n                      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                        htmlFor: \"search_input\",\n                        className: style.icon,\n                        onClick: handleSearch,\n                        children: /*#__PURE__*/_jsxDEV(SearchOutlined, {}, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 271,\n                          columnNumber: 29\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 266,\n                        columnNumber: 27\n                      }, this), /*#__PURE__*/_jsxDEV(motion.input, {\n                        type: \"text\",\n                        placeholder: t('search'),\n                        transition: {\n                          duration: 0\n                        },\n                        value: term,\n                        id: \"search_input\",\n                        onChange: e => setTerm(e.target.value),\n                        ref: searchRef,\n                        variants: {\n                          visible: {\n                            width: '100%',\n                            opacity: 1\n                          },\n                          stable: {\n                            width: '0',\n                            opacity: 0\n                          }\n                        },\n                        animate: animationForm,\n                        initial: 'stable',\n                        exit: 'stable'\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 273,\n                        columnNumber: 27\n                      }, this), /*#__PURE__*/_jsxDEV(AnimatePresence, {\n                        children: isSearchVisible ? /*#__PURE__*/_jsxDEV(motion.div, {\n                          id: \"search_icon\",\n                          className: style.closeSearch,\n                          variants: {\n                            visible: {\n                              opacity: 1,\n                              transition: {\n                                delay: 0.3,\n                                duration: 0.4\n                              }\n                            },\n                            stable: {\n                              opacity: 0,\n                              transition: {\n                                duration: 0.1\n                              }\n                            }\n                          },\n                          transition: {\n                            type: 'twin'\n                          },\n                          animate: 'visible',\n                          initial: 'stable',\n                          exit: 'stable',\n                          onClick: () => setIsSearchVisible(false),\n                          children: /*#__PURE__*/_jsxDEV(CloseIcon, {}, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 325,\n                            columnNumber: 33\n                          }, this)\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 299,\n                          columnNumber: 31\n                        }, this) : ''\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 297,\n                        columnNumber: 27\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 234,\n                      columnNumber: 25\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 231,\n                    columnNumber: 23\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 230,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 221,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n                className: style.icon_list,\n                children: [/*#__PURE__*/_jsxDEV(CartDropdown, {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 343,\n                  columnNumber: 21\n                }, this), hasLogged ? /*#__PURE__*/_jsxDEV(ProfileDropdown, {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 345,\n                  columnNumber: 23\n                }, this) : /*#__PURE__*/_jsxDEV(Button, {\n                  onClick: () => Router.push('/signin'),\n                  className: style.login_btn,\n                  children: \"\\u0412\\u043E\\u0439\\u0442\\u0438\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 347,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(LanguageDropdown, {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 354,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 335,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 220,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 212,\n            columnNumber: 15\n          }, this) : /*#__PURE__*/_jsxDEV(MobileHeader, {\n            data: navData\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 359,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 210,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 209,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 208,\n      columnNumber: 7\n    }, this), term && isSearchVisible ? /*#__PURE__*/_jsxDEV(QuickSearch, {\n      term: term,\n      loading: loading,\n      products: products\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 365,\n      columnNumber: 9\n    }, this) : '']\n  }, void 0, true);\n}\n\nexport default Header;","map":{"version":3,"sources":["/home/algo/repos/survey/components/header/header.jsx"],"names":["React","useState","useEffect","useRef","style","Container","ClickAwayListener","makeStyles","Button","CartDropdown","LanguageDropdown","BrandLogo","CloseIcon","ProfileIcon","SearchOutlined","motion","useAnimation","AnimatePresence","NavItem","useTranslation","Router","Link","ProfileDropdown","MobileHeader","PropTypes","AppBar","useScrollTrigger","Slide","QuickSearch","axios","HideOnScroll","props","children","window","trigger","target","undefined","propTypes","element","isRequired","func","useStyles","select","display","border","background","Header","categories","hasLogged","t","isMobile","setIsMobile","classes","searchRef","animationForm","loading","setLoading","isSearchVisible","setIsSearchVisible","term","setTerm","products","setProducts","navData","title","subCategs","link","submitHandler","e","preventDefault","push","encodeURI","start","current","focus","blur","length","searchProduct","response","get","data","console","log","err","handleSearch","innerWidth","addEventListener","document","keyCode","removeEventListener","header","wrapper","brandLogo","nav","list","map","item","index","listItem","searchForm","animate","visible","left","right","top","y","width","stable","flip","duration","type","icon","value","opacity","closeSearch","transition","delay","icon_list","login_btn"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, useRef } from 'react'\nimport style from './header.module.scss'\nimport {\n  Container,\n  ClickAwayListener,\n  makeStyles,\n  Button,\n} from '@material-ui/core'\nimport CartDropdown from './CartDropdown'\nimport LanguageDropdown from './LanguageDropdown'\nimport { BrandLogo, CloseIcon, ProfileIcon } from '../svg'\nimport { SearchOutlined } from '@material-ui/icons'\nimport { motion, useAnimation, AnimatePresence } from 'framer-motion'\nimport NavItem from './navItem'\nimport { useTranslation, Router, Link } from '../../i18n'\nimport ProfileDropdown from './ProfileDropdown'\nimport MobileHeader from './mobileHeader'\nimport PropTypes from 'prop-types'\nimport AppBar from '@material-ui/core/AppBar'\nimport useScrollTrigger from '@material-ui/core/useScrollTrigger'\nimport Slide from '@material-ui/core/Slide'\nimport QuickSearch from './QuickSearch'\nimport axios from 'axios'\n\nfunction HideOnScroll(props) {\n  const { children, window } = props\n  // Note that you normally won't need to set the window ref as useScrollTrigger\n  // will default to window.\n  // This is only being set here because the demo is in an iframe.\n  const trigger = useScrollTrigger({ target: window ? window() : undefined })\n\n  return (\n    <Slide appear={false} direction='down' in={!trigger}>\n      {children}\n    </Slide>\n  )\n}\n\nHideOnScroll.propTypes = {\n  children: PropTypes.element.isRequired,\n  window: PropTypes.func,\n}\nconst useStyles = makeStyles(() => ({\n  select: {\n    '& .MuiInput-root::before': {\n      display: 'none',\n    },\n    '& .MuiInput-underline:after': {\n      border: '0',\n    },\n    '& .MuiInput-underline:before': {\n      border: '0',\n    },\n    '& .Mui-focused': {\n      background: 'transparent',\n    },\n  },\n}))\n\nfunction Header({ categories, hasLogged }) {\n  const { t } = useTranslation()\n  const [isMobile, setIsMobile] = useState(false)\n  const classes = useStyles()\n  const searchRef = useRef(null)\n  const animationForm = useAnimation()\n  const [loading, setLoading] = useState(false)\n  const [isSearchVisible, setIsSearchVisible] = useState(false)\n  const [term, setTerm] = useState('')\n  const [products, setProducts] = useState([])\n  const navData = [\n    {\n      title: t('apple_p'),\n      subCategs: [\n        { title: 'Iphone', link: 'category=apple_p&subcategory=Iphone' },\n        { title: 'Ipad', link: 'category=apple_p&subcategory=Ipad' },\n        {\n          title: 'Apple watch',\n          link: 'category=apple_p&subcategory=Apple_watch',\n        },\n        { title: 'AirPod', link: 'category=apple_p&subcategory=AirPod' },\n        { title: 'Macbook', link: 'category=apple_p&subcategory=Macbook' },\n        { title: 'iMac', link: 'category=apple_p&subcategory=iMac' },\n      ],\n    },\n    {\n      title: t('samsung_p'),\n      subCategs: [\n        {\n          title: t('galaxy_phones'),\n          link: 'category=samsung_p&subcategory=galaxy@phones',\n        },\n        { title: t('watches'), link: 'category=samsung_p&subcategory=watches' },\n        { title: t('tablets'), link: 'category=samsung_p&subcategory=tablets' },\n      ],\n    },\n    {\n      title: t('acoustics'),\n      subCategs: [\n        {\n          title: t('speakers'),\n          link: 'category=acoustics&subcategory=speakers',\n        },\n        {\n          title: t('earphones'),\n          link: 'category=acoustics&subcategory=earphones',\n        },\n        {\n          title: t('microphones'),\n          link: 'category=acoustics&subcategory=microphones',\n        },\n      ],\n    },\n    {\n      title: t('accessories'),\n      subCategs: [\n        { title: t('covers'), link: 'category=accessories&subcategory=covers' },\n        {\n          title: t('chargers'),\n          link: 'category=accessories&subcategory=chargers',\n        },\n      ],\n    },\n  ]\n  const submitHandler = (e) => {\n    e.preventDefault()\n    if (term) {\n      setIsSearchVisible(false)\n      Router.push(`/search?search=${encodeURI(term)}`)\n    }\n  }\n  useEffect(() => {\n    if (isSearchVisible) {\n      animationForm.start('visible')\n    } else {\n      animationForm.start('stable')\n      setTerm('')\n    }\n  }, [isSearchVisible])\n\n  useEffect(() => {\n    if (searchRef.current) {\n      if (isSearchVisible) {\n        searchRef.current.focus()\n      } else {\n        searchRef.current.blur()\n      }\n    }\n  }, [isSearchVisible])\n\n  useEffect(() => {\n    if (term && term.length > 2) {\n      searchProduct()\n    } else if (term === '') {\n      setProducts([])\n    }\n  }, [term])\n\n  const searchProduct = async () => {\n    try {\n      setLoading(true)\n      const response = await axios.get(\n        `http://46.101.122.150:1235/v1/product?lang=ru&search=${term}&active=true`\n      )\n\n      setProducts(response.data.products)\n      console.log(response)\n    } catch (err) {\n      console.log(err)\n    } finally {\n      setLoading(false)\n    }\n  }\n\n  const handleSearch = () => {\n    if (term) {\n      setIsSearchVisible(false)\n      Router.push(`/search?search=${term}`)\n    } else {\n      setIsSearchVisible(!isSearchVisible)\n    }\n  }\n\n  useEffect(() => {\n    if (window) {\n      setIsMobile(window.innerWidth > 876 ? false : true)\n      window.addEventListener('resize', () =>\n        setIsMobile(window.innerWidth > 876 ? false : true)\n      )\n    }\n    document.addEventListener(\n      'keydown',\n      (e) => {\n        if (e.keyCode === 27) {\n          setIsSearchVisible(false)\n        }\n      },\n      false\n    )\n\n    return () => {\n      window.removeEventListener('resize', () => {})\n      document.removeEventListener('keydown', (e) => console.log(e), false)\n    }\n  }, [])\n  return (\n    <>\n      {/* <HideOnScroll {...props}> */}\n      <AppBar elevation={0}>\n        <header className={style.header}>\n          <Container>\n            {!isMobile ? (\n              <div className={style.wrapper}>\n                <div className={style.brandLogo}>\n                  <Link href='/'>\n                    <a id='logo_header' aria-label='Logo'>\n                      <BrandLogo />\n                    </a>\n                  </Link>\n                </div>\n                <div className={style.nav}>\n                  <ul className={style.list}>\n                    {categories?.map((item, index) => (\n                      <NavItem\n                        key={index}\n                        data={item}\n                        subCategs={item.children}\n                      />\n                    ))}\n\n                    <li className={style.listItem}>\n                      <ClickAwayListener\n                        onClickAway={() => setIsSearchVisible(false)}\n                      >\n                        <motion.form\n                          autoComplete='off'\n                          className={`${style.searchForm} ${\n                            isSearchVisible ? style.animate : ''\n                          }`}\n                          variants={{\n                            visible: {\n                              left: '0',\n                              right: 'auto',\n                              top: '50%',\n                              y: '-50%',\n                              width: '100%',\n                            },\n                            stable: {\n                              right: '50px',\n                              left: 'auto',\n                              // x: 0,\n                              flip: true,\n                              width: '0',\n                              top: 0,\n                              y: 0,\n                            },\n                          }}\n                          transition={{\n                            duration: 0.3,\n                            type: 'twin',\n                          }}\n                          animate={animationForm}\n                          initial={'stable'}\n                          exit={'stable'}\n                          onSubmit={submitHandler}\n                        >\n                          <label\n                            htmlFor='search_input'\n                            className={style.icon}\n                            onClick={handleSearch}\n                          >\n                            <SearchOutlined />\n                          </label>\n                          <motion.input\n                            type='text'\n                            placeholder={t('search')}\n                            transition={{\n                              duration: 0,\n                            }}\n                            value={term}\n                            id='search_input'\n                            onChange={(e) => setTerm(e.target.value)}\n                            ref={searchRef}\n                            variants={{\n                              visible: {\n                                width: '100%',\n                                opacity: 1,\n                              },\n                              stable: {\n                                width: '0',\n                                opacity: 0,\n                              },\n                            }}\n                            animate={animationForm}\n                            initial={'stable'}\n                            exit={'stable'}\n                          />\n                          <AnimatePresence>\n                            {isSearchVisible ? (\n                              <motion.div\n                                id='search_icon'\n                                className={style.closeSearch}\n                                variants={{\n                                  visible: {\n                                    opacity: 1,\n                                    transition: {\n                                      delay: 0.3,\n                                      duration: 0.4,\n                                    },\n                                  },\n                                  stable: {\n                                    opacity: 0,\n                                    transition: {\n                                      duration: 0.1,\n                                    },\n                                  },\n                                }}\n                                transition={{\n                                  type: 'twin',\n                                }}\n                                animate={'visible'}\n                                initial={'stable'}\n                                exit={'stable'}\n                                onClick={() => setIsSearchVisible(false)}\n                              >\n                                <CloseIcon />\n                              </motion.div>\n                            ) : (\n                              ''\n                            )}\n                          </AnimatePresence>\n                        </motion.form>\n                      </ClickAwayListener>\n                    </li>\n                  </ul>\n                  <ul className={style.icon_list}>\n                    {/* <li className={`${style.listItem} ${style.cartIcon}`}>\n                      <Link href='/cart'>\n                        <a>\n                          <LocalMallOutlined />\n                        </a>\n                      </Link>\n                    </li> */}\n                    <CartDropdown />\n                    {hasLogged ? (\n                      <ProfileDropdown />\n                    ) : (\n                      <Button\n                        onClick={() => Router.push('/signin')}\n                        className={style.login_btn}\n                      >\n                        Войти\n                      </Button>\n                    )}\n                    <LanguageDropdown />\n                  </ul>\n                </div>\n              </div>\n            ) : (\n              <MobileHeader data={navData} />\n            )}\n          </Container>\n        </header>\n      </AppBar>\n      {term && isSearchVisible ? (\n        <QuickSearch term={term} loading={loading} products={products} />\n      ) : (\n        ''\n      )}\n      {/* </HideOnScroll> */}\n    </>\n  )\n}\nexport default Header\n"]},"metadata":{},"sourceType":"module"}