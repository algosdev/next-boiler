{"ast":null,"code":"import _defineProperty from \"/home/algo/repos/survey/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"/home/algo/repos/survey/components/header/CartDropdown.jsx\",\n    _this = this,\n    _s = $RefreshSig$();\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React, { useEffect, useState, useRef } from 'react';\nimport { ClickAwayListener, Grow, Paper, Popper, MenuItem, MenuList, makeStyles } from '@material-ui/core';\nimport ShoppingCartOutlinedIcon from '@material-ui/icons/ShoppingCartOutlined';\nimport { Link } from '../../i18n';\nimport { numberToPrice } from '../../lib/numberToPrice';\nimport style from './header.module.scss';\nimport { useSelector, shallowEqual } from 'react-redux';\nimport { useTranslation } from '../../i18n';\nvar useStyles = makeStyles(function () {\n  return {\n    paper: {\n      borderRadius: '6px',\n      borderTopLeftRadius: '0',\n      borderTopRightRadius: '0',\n      background: '#1d1d1d',\n      color: '#fff',\n      overflow: 'hidden',\n      '& .MuiMenuItem-root': {\n        padding: 0\n      },\n      '& .MuiMenuItem-root a': {\n        color: '#fff',\n        justifyContent: 'flex-start !important',\n        padding: '6px 20px',\n        display: 'block',\n        width: '100%'\n      },\n      '& .MuiMenuItem-root a:hover': {\n        textDecoration: 'none'\n      },\n      '& .MuiMenuItem-root p': {\n        color: '#fff',\n        maxWidth: '100%',\n        wordBreak: 'break-word'\n      },\n      '& .MuiList-root': {\n        padding: '0'\n      },\n      '& .MuiListItem-root:hover': {\n        background: 'rgba(255,255,255,0.2)'\n      }\n    },\n    popper: {\n      zIndex: '999',\n      top: '0 !important',\n      paddingTop: '10px'\n    }\n  };\n});\n\nvar CartDropdown = function CartDropdown(_ref) {\n  _s();\n\n  var mobile = _ref.mobile;\n\n  var _useTranslation = useTranslation(),\n      t = _useTranslation.t;\n\n  var _useState = useState(false),\n      isBagVisible = _useState[0],\n      setIsBagVisible = _useState[1];\n\n  var _useState2 = useState(false),\n      animate = _useState2[0],\n      setAnimate = _useState2[1];\n\n  var classes = useStyles();\n\n  var calculateTotalQuantity = function calculateTotalQuantity(data) {\n    var sum = 0;\n    data.forEach(function (el) {\n      sum += el.quantity;\n    });\n    return sum;\n  };\n\n  var productsInCart = useSelector(function (state) {\n    var _state$cart;\n\n    return state === null || state === void 0 ? void 0 : (_state$cart = state.cart) === null || _state$cart === void 0 ? void 0 : _state$cart.cartItems;\n  }, shallowEqual);\n\n  var _useState3 = useState(calculateTotalQuantity(productsInCart)),\n      badgeCount = _useState3[0],\n      setBadgeCount = _useState3[1];\n\n  var _useState4 = useState(false),\n      open = _useState4[0],\n      setOpen = _useState4[1];\n\n  var anchorRef = useRef(null);\n\n  var handleToggle = function handleToggle() {\n    setOpen(function (prevOpen) {\n      return !prevOpen;\n    });\n  };\n\n  var handleClose = function handleClose(event) {\n    if (anchorRef.current && anchorRef.current.contains(event.target)) {\n      return;\n    }\n\n    setOpen(false);\n  };\n\n  function handleListKeyDown(event) {\n    if (event.key === 'Tab') {\n      event.preventDefault();\n      setOpen(false);\n    }\n  }\n\n  var prevOpen = useRef(open);\n  useEffect(function () {\n    if (prevOpen.current === true && open === false) {\n      anchorRef.current.focus();\n    }\n\n    prevOpen.current = open;\n  }, [open]);\n  useEffect(function () {\n    setBadgeCount(calculateTotalQuantity(productsInCart));\n\n    if (productsInCart === null || productsInCart === void 0 ? void 0 : productsInCart.length) {\n      animateInPeriod();\n    }\n  }, [productsInCart]);\n\n  var animateInPeriod = function animateInPeriod() {\n    setAnimate(true);\n    setTimeout(function () {\n      setAnimate(false);\n    }, 1500);\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(\"li\", {\n      className: \"\".concat(style.listItem, \" \").concat(style.cartIcon),\n      ref: anchorRef,\n      \"aria-controls\": open ? 'menu-list-grow' : undefined,\n      \"aria-haspopup\": \"true\",\n      onMouseEnter: function onMouseEnter() {\n        return setOpen(true);\n      },\n      onMouseLeave: function onMouseLeave() {\n        return setOpen(false);\n      },\n      children: [/*#__PURE__*/_jsxDEV(Link, {\n        href: \"/cart\",\n        children: /*#__PURE__*/_jsxDEV(\"a\", {\n          \"aria-label\": \"Cart\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"\".concat(style.icon, \" \").concat(animate ? style.animate : ''),\n            children: /*#__PURE__*/_jsxDEV(ShoppingCartOutlinedIcon, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 132,\n              columnNumber: 15\n            }, _this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 131,\n            columnNumber: 13\n          }, _this), calculateTotalQuantity(productsInCart) !== 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n            className: style.badge_cont,\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"\".concat(style.badge, \" \").concat(animate ? style.animate : '', \" \").concat(badgeCount > 99 ? 'badge_fix' : ''),\n              children: /*#__PURE__*/_jsxDEV(\"span\", {\n                children: badgeCount > 99 ? '99+' : badgeCount\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 142,\n                columnNumber: 19\n              }, _this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 137,\n              columnNumber: 17\n            }, _this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 136,\n            columnNumber: 15\n          }, _this) : '']\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 130,\n          columnNumber: 11\n        }, _this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 129,\n        columnNumber: 9\n      }, _this), !mobile ? /*#__PURE__*/_jsxDEV(Popper, {\n        open: open,\n        anchorEl: anchorRef.current,\n        className: classes.popper,\n        role: undefined,\n        transition: true,\n        disablePortal: true,\n        children: function children(_ref2) {\n          var TransitionProps = _ref2.TransitionProps,\n              placement = _ref2.placement;\n          return /*#__PURE__*/_jsxDEV(Grow, _objectSpread(_objectSpread({}, TransitionProps), {}, {\n            style: {\n              transformOrigin: placement === 'bottom' ? 'center top' : 'center bottom'\n            },\n            children: /*#__PURE__*/_jsxDEV(Paper, {\n              className: classes.paper,\n              children: /*#__PURE__*/_jsxDEV(ClickAwayListener, {\n                onClickAway: handleClose,\n                children: (productsInCart === null || productsInCart === void 0 ? void 0 : productsInCart.length) ? /*#__PURE__*/_jsxDEV(Link, {\n                  href: \"/cart\",\n                  children: /*#__PURE__*/_jsxDEV(\"li\", {\n                    className: style.cart_items,\n                    onClick: handleClose,\n                    diableRipple: true,\n                    children: productsInCart.map(function (el, ind) {\n                      var _el$price;\n\n                      return /*#__PURE__*/_jsxDEV(\"div\", {\n                        className: style.item,\n                        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                          className: style.img,\n                          children: /*#__PURE__*/_jsxDEV(\"img\", {\n                            src: el.image,\n                            alt: el.name\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 179,\n                            columnNumber: 33\n                          }, _this)\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 178,\n                          columnNumber: 31\n                        }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n                          className: style.details,\n                          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                            className: style.title,\n                            children: el.name\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 183,\n                            columnNumber: 33\n                          }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n                            className: style.desc,\n                            children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                              children: [t('price'), \":\", ' ', numberToPrice(el === null || el === void 0 ? void 0 : (_el$price = el.price) === null || _el$price === void 0 ? void 0 : _el$price.price), ' ', t('soum')]\n                            }, void 0, true, {\n                              fileName: _jsxFileName,\n                              lineNumber: 185,\n                              columnNumber: 35\n                            }, _this), /*#__PURE__*/_jsxDEV(\"p\", {\n                              children: [t('quantity'), \": \", el.quantity, ' ', el.quantity > 1 ? t('pc2') : t('pc1')]\n                            }, void 0, true, {\n                              fileName: _jsxFileName,\n                              lineNumber: 190,\n                              columnNumber: 35\n                            }, _this)]\n                          }, void 0, true, {\n                            fileName: _jsxFileName,\n                            lineNumber: 184,\n                            columnNumber: 33\n                          }, _this)]\n                        }, void 0, true, {\n                          fileName: _jsxFileName,\n                          lineNumber: 182,\n                          columnNumber: 31\n                        }, _this)]\n                      }, ind, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 177,\n                        columnNumber: 29\n                      }, _this);\n                    })\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 171,\n                    columnNumber: 25\n                  }, _this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 170,\n                  columnNumber: 23\n                }, _this) : /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: style.no_item,\n                  children: t('empty_cart')\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 201,\n                  columnNumber: 23\n                }, _this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 168,\n                columnNumber: 19\n              }, _this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 167,\n              columnNumber: 17\n            }, _this)\n          }), void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 160,\n            columnNumber: 15\n          }, _this);\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 151,\n        columnNumber: 11\n      }, _this) : '']\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 7\n    }, _this)\n  }, void 0, false);\n};\n\n_s(CartDropdown, \"t7NXjvICHTR9SL2Hht0Nf74dods=\", false, function () {\n  return [useTranslation, useStyles, useSelector];\n});\n\n_c = CartDropdown;\nexport default CartDropdown;\n\nvar _c;\n\n$RefreshReg$(_c, \"CartDropdown\");","map":{"version":3,"sources":["/home/algo/repos/survey/components/header/CartDropdown.jsx"],"names":["React","useEffect","useState","useRef","ClickAwayListener","Grow","Paper","Popper","MenuItem","MenuList","makeStyles","ShoppingCartOutlinedIcon","Link","numberToPrice","style","useSelector","shallowEqual","useTranslation","useStyles","paper","borderRadius","borderTopLeftRadius","borderTopRightRadius","background","color","overflow","padding","justifyContent","display","width","textDecoration","maxWidth","wordBreak","popper","zIndex","top","paddingTop","CartDropdown","mobile","t","isBagVisible","setIsBagVisible","animate","setAnimate","classes","calculateTotalQuantity","data","sum","forEach","el","quantity","productsInCart","state","cart","cartItems","badgeCount","setBadgeCount","open","setOpen","anchorRef","handleToggle","prevOpen","handleClose","event","current","contains","target","handleListKeyDown","key","preventDefault","focus","length","animateInPeriod","setTimeout","listItem","cartIcon","undefined","icon","badge_cont","badge","TransitionProps","placement","transformOrigin","cart_items","map","ind","item","img","image","name","details","title","desc","price","no_item"],"mappings":"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","sourcesContent":["import React, { useEffect, useState, useRef } from 'react';\nimport {\n  ClickAwayListener,\n  Grow,\n  Paper,\n  Popper,\n  MenuItem,\n  MenuList,\n  makeStyles,\n} from '@material-ui/core';\nimport ShoppingCartOutlinedIcon from '@material-ui/icons/ShoppingCartOutlined';\nimport { Link } from '../../i18n';\nimport { numberToPrice } from '../../lib/numberToPrice';\nimport style from './header.module.scss';\nimport { useSelector, shallowEqual } from 'react-redux';\nimport { useTranslation } from '../../i18n';\nconst useStyles = makeStyles(() => ({\n  paper: {\n    borderRadius: '6px',\n    borderTopLeftRadius: '0',\n    borderTopRightRadius: '0',\n    background: '#1d1d1d',\n    color: '#fff',\n    overflow: 'hidden',\n\n    '& .MuiMenuItem-root': {\n      padding: 0,\n    },\n    '& .MuiMenuItem-root a': {\n      color: '#fff',\n      justifyContent: 'flex-start !important',\n      padding: '6px 20px',\n      display: 'block',\n      width: '100%',\n    },\n    '& .MuiMenuItem-root a:hover': {\n      textDecoration: 'none',\n    },\n    '& .MuiMenuItem-root p': {\n      color: '#fff',\n      maxWidth: '100%',\n      wordBreak: 'break-word',\n    },\n    '& .MuiList-root': {\n      padding: '0',\n    },\n    '& .MuiListItem-root:hover': {\n      background: 'rgba(255,255,255,0.2)',\n    },\n  },\n  popper: {\n    zIndex: '999',\n    top: '0 !important',\n    paddingTop: '10px',\n  },\n}));\nconst CartDropdown = ({ mobile }) => {\n  const { t } = useTranslation();\n  const [isBagVisible, setIsBagVisible] = useState(false);\n  const [animate, setAnimate] = useState(false);\n  const classes = useStyles();\n  const calculateTotalQuantity = (data) => {\n    let sum = 0;\n    data.forEach((el) => {\n      sum += el.quantity;\n    });\n    return sum;\n  };\n  const productsInCart = useSelector(\n    (state) => state?.cart?.cartItems,\n    shallowEqual\n  );\n  const [badgeCount, setBadgeCount] = useState(\n    calculateTotalQuantity(productsInCart)\n  );\n  const [open, setOpen] = useState(false);\n  const anchorRef = useRef(null);\n\n  const handleToggle = () => {\n    setOpen((prevOpen) => !prevOpen);\n  };\n\n  const handleClose = (event) => {\n    if (anchorRef.current && anchorRef.current.contains(event.target)) {\n      return;\n    }\n\n    setOpen(false);\n  };\n\n  function handleListKeyDown(event) {\n    if (event.key === 'Tab') {\n      event.preventDefault();\n      setOpen(false);\n    }\n  }\n\n  const prevOpen = useRef(open);\n  useEffect(() => {\n    if (prevOpen.current === true && open === false) {\n      anchorRef.current.focus();\n    }\n\n    prevOpen.current = open;\n  }, [open]);\n  useEffect(() => {\n    setBadgeCount(calculateTotalQuantity(productsInCart));\n\n    if (productsInCart?.length) {\n      animateInPeriod();\n    }\n  }, [productsInCart]);\n  const animateInPeriod = () => {\n    setAnimate(true);\n    setTimeout(() => {\n      setAnimate(false);\n    }, 1500);\n  };\n  return (\n    <>\n      <li\n        className={`${style.listItem} ${style.cartIcon}`}\n        ref={anchorRef}\n        aria-controls={open ? 'menu-list-grow' : undefined}\n        aria-haspopup='true'\n        onMouseEnter={() => setOpen(true)}\n        onMouseLeave={() => setOpen(false)}\n      >\n        <Link href='/cart'>\n          <a aria-label='Cart'>\n            <div className={`${style.icon} ${animate ? style.animate : ''}`}>\n              <ShoppingCartOutlinedIcon />\n            </div>\n\n            {calculateTotalQuantity(productsInCart) !== 0 ? (\n              <div className={style.badge_cont}>\n                <div\n                  className={`${style.badge} ${animate ? style.animate : ''} ${\n                    badgeCount > 99 ? 'badge_fix' : ''\n                  }`}\n                >\n                  <span>{badgeCount > 99 ? '99+' : badgeCount}</span>\n                </div>\n              </div>\n            ) : (\n              ''\n            )}\n          </a>\n        </Link>\n        {!mobile ? (\n          <Popper\n            open={open}\n            anchorEl={anchorRef.current}\n            className={classes.popper}\n            role={undefined}\n            transition\n            disablePortal\n          >\n            {({ TransitionProps, placement }) => (\n              <Grow\n                {...TransitionProps}\n                style={{\n                  transformOrigin:\n                    placement === 'bottom' ? 'center top' : 'center bottom',\n                }}\n              >\n                <Paper className={classes.paper}>\n                  <ClickAwayListener onClickAway={handleClose}>\n                    {productsInCart?.length ? (\n                      <Link href='/cart'>\n                        <li\n                          className={style.cart_items}\n                          onClick={handleClose}\n                          diableRipple\n                        >\n                          {productsInCart.map((el, ind) => (\n                            <div className={style.item} key={ind}>\n                              <div className={style.img}>\n                                <img src={el.image} alt={el.name} />\n                              </div>\n\n                              <div className={style.details}>\n                                <div className={style.title}>{el.name}</div>\n                                <div className={style.desc}>\n                                  <p>\n                                    {t('price')}:{' '}\n                                    {numberToPrice(el?.price?.price)}{' '}\n                                    {t('soum')}\n                                  </p>\n                                  <p>\n                                    {t('quantity')}: {el.quantity}{' '}\n                                    {el.quantity > 1 ? t('pc2') : t('pc1')}\n                                  </p>\n                                </div>\n                              </div>\n                            </div>\n                          ))}\n                        </li>\n                      </Link>\n                    ) : (\n                      <div className={style.no_item}>{t('empty_cart')}</div>\n                    )}\n                    {/* <MenuItem onClick={handleClose} diableRipple>\n                      <Link href='/cart'>\n                        <a>{t('cart')}</a>\n                      </Link>\n                    </MenuItem>\n                    <MenuItem onClick={handleClose} diableRipple>\n                      <Link href='/orders'>\n                        <a>{t('orders')}</a>\n                      </Link>\n                    </MenuItem>\n                    <MenuItem onClick={handleClose} diableRipple>\n                      <Link href='/account'>\n                        <a>{t('profile')}</a>\n                      </Link>\n                    </MenuItem>\n                    <MenuItem onClick={handleClose} diableRipple>\n                      <Link href='/signin'>\n                        <a>{t('signin')}</a>\n                      </Link>\n                    </MenuItem>*/}\n                  </ClickAwayListener>\n                </Paper>\n              </Grow>\n            )}\n          </Popper>\n        ) : (\n          ''\n        )}\n      </li>\n    </>\n  );\n};\n\nexport default CartDropdown;\n"]},"metadata":{},"sourceType":"module"}